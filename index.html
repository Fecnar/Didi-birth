<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chutadamon's Birthday Space</title>
    <meta name="description" content="Happy Birthday Chutadamon! - Your personal birthday celebration app">
    <link rel="stylesheet" href="style.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- PWA capability -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Birthday Site">

    <!-- Windows tiles -->
    <meta name="msapplication-TileImage" content="/icon-192x192.png">
    <meta name="msapplication-TileColor" content="#FF6B9D">
    
    <!-- Theme colors -->
    <meta name="theme-color" content="#FF6B9D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Birthday Space">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-192x192.png">
    <link rel="apple-touch-icon" href="/icon-192x192.png">

    <!-- Spot -->
     <script src="https://sdk.scdn.co/spotify-player.js"></script>


    <!-- Preconnects -->
    <link rel="preconnect" href="https://accounts.spotify.com">
    <link rel="preconnect" href="https://api.spotify.com">

    <!-- Favicon for browsers -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icon-192x192.png">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="192x192" href="/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="/icon-512x512.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#FF6B9D">
</head>
<body>
    <!-- PWA Install Prompt -->
    <div class="install-prompt hidden" id="install-prompt">
        <div class="install-content">
            <div class="install-icon">📱</div>
            <h3>Install Birthday App</h3>
            <p>Add to your home screen for the best experience!</p>
            <div class="install-actions">
                <button class="btn btn--primary" id="install-button">Install App</button>
                <button class="btn btn--outline" id="dismiss-install">Later</button>
            </div>
        </div>
    </div>

    <!-- Notification Permission Banner -->
    <div class="notification-banner hidden" id="notification-banner">
        <div class="banner-content">
            <div class="banner-icon">🔔</div>
            <div class="banner-text">
                <strong>Enable Notifications</strong>
                <p>Get timely reminders for meals and water intake to stay healthy!</p>
            </div>
            <div class="banner-actions">
                <button class="btn btn--primary btn--sm" id="enable-notifications">Enable</button>
                <button class="btn btn--outline btn--sm" id="dismiss-notifications">Later</button>
            </div>
        </div>
    </div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
        <span class="theme-toggle-icon">🌙</span>
    </button>

    <!-- Mobile Navigation -->
    <nav class="navigation">
        <button class="nav-toggle" id="nav-toggle">
            <span class="hamburger"></span>
            <span class="hamburger"></span>
            <span class="hamburger"></span>
        </button>
        
        <div class="nav-menu" id="nav-menu">
            <a href="#home" class="nav-link">Home</a>
            <a href="#gallery" class="nav-link">Gallery</a>
            <a href="#calendar" class="nav-link">Calendar</a>
            <a href="#spotify" class="nav-link">Music</a>
            <a href="#reminders" class="nav-link">Reminders</a>
            <a href="#" id="add-to-home" class="nav-link">📱 Add to Home</a>
        </div>
    </nav>


    <!-- Floating Decorations -->
    <div class="floating-decorations">
        <div class="balloon balloon-1">🎈</div>
        <div class="balloon balloon-2">🎈</div>
        <div class="balloon balloon-3">🎈</div>
        <div class="balloon balloon-4">🎈</div>
        <div class="confetti confetti-1">✨</div>
        <div class="confetti confetti-2">🎊</div>
        <div class="confetti confetti-3">✨</div>
        <div class="confetti confetti-4">🎊</div>
    </div>

    <main class="main-content">
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="container">
                <div class="home-content">
                    <div class="birthday-header">
                        <h1 class="birthday-title">Happy Birthday</h1>
                        <h2 class="birthday-name">Chutadamon! 🎂</h2>
                        <p class="birthday-subtitle">Today is your special day! 🌟</p>
                    </div>
                    
                    <div class="birthday-gif">
                        <div class="gif-frame">
                            <img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExOWQzc2pwMW5xcjNqeHR0bGJ2eDBqdmpvZHpnYzQ3MnhmMzlzOGd3aSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/9rO5Aksmn0dHQKXJAu/giphy.gif" alt="Happy Birthday GIF" />
                        </div>
                    </div>

                    <div class="counters">
                        <div class="card countdown-card">
                            <div class="card__header">
                                <h3 id="countdown-title">🎉 It's Your Birthday Today!</h3>
                            </div>
                            <div class="card__body">
                                <div id="countdown" class="countdown-display">
                                    <div class="time-unit">
                                        <span id="days">365</span>
                                        <label>Days Until Next</label>
                                    </div>
                                    <div class="time-unit">
                                        <span id="hours">0</span>
                                        <label>Hours</label>
                                    </div>
                                    <div class="time-unit">
                                        <span id="minutes">0</span>
                                        <label>Minutes</label>
                                    </div>
                                    <div class="time-unit">
                                        <span id="seconds">0</span>
                                        <label>Seconds</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card sister-card">
                            <div class="card__header">
                                <h3>💕 Best Sister Since</h3>
                            </div>
                            <div class="card__body">
                                <div class="sister-counter">
                                    <span id="sister-days">7308</span>
                                    <label>Amazing Days</label>
                                </div>
                                <p class="sister-date">October 5, 2005 🌟</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Spotify Section -->
        <section id="spotify" class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">🎵 Music Player</h2>
                    <p class="section-subtitle">Your complete Spotify experience! 🎶</p>
                </div>
                
                <div class="spotify-container">
                    <!-- Login Section -->
                    <div class="card spotify-login-card" id="spotify-login-card">
                        <div class="card__body">
                            <div class="spotify-login-content">
                                <div class="spotify-logo">🎵</div>
                                <h3>Connect Your Spotify</h3>
                                <p>Access all your playlists, liked songs, and enjoy full music control!</p>
                                <button class="btn btn--primary" id="spotify-login">Login with Spotify</button>
                                <p class="spotify-note"><small>Requires Spotify Premium for full playback control</small></p>
                            </div>
                        </div>
                    </div>

                    <!-- Error Section -->
                    <div class="card spotify-error-card hidden" id="spotify-error">
                        <div class="card__body">
                            <div class="error-content">
                                <div class="error-icon">⚠️</div>
                                <h3>Connection Error</h3>
                                <p id="error-message">Unable to connect to Spotify</p>
                                <button class="btn btn--primary" id="retry-spotify">Try Again</button>
                            </div>
                        </div>
                    </div>

                    <!-- User Profile -->
                    <div class="card spotify-profile-card hidden" id="spotify-profile-card">
                        <div class="card__body">
                            <div class="user-profile">
                                <img id="user-avatar" src="" alt="Profile" class="user-avatar">
                                <div class="user-info">
                                    <h3 id="user-name">Loading...</h3>
                                    <p id="user-email">Loading...</p>
                                    <button class="btn btn--outline btn--sm" id="spotify-logout">Logout</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Music Player -->
                    <div class="card spotify-player-card hidden" id="spotify-player-card">
                        <div class="card__body">
                            <div class="now-playing">
                                <div class="track-info">
                                    <img id="current-track-image" src="" alt="Album Art" class="current-track-image">
                                    <div class="track-details">
                                        <h4 id="current-track-name">No track playing</h4>
                                        <p id="current-track-artist">-</p>
                                        <p id="current-track-album">-</p>
                                    </div>
                                </div>
                                
                                <div class="player-controls">
                                    <button class="control-btn" id="shuffle-btn" title="Shuffle">🔀</button>
                                    <button class="control-btn" id="prev-btn" title="Previous">⏮️</button>
                                    <button class="control-btn play-btn" id="play-pause-btn" title="Play/Pause">▶️</button>
                                    <button class="control-btn" id="next-btn" title="Next">⏭️</button>
                                    <button class="control-btn" id="repeat-btn" title="Repeat">🔁</button>
                                </div>
                                
                                <div class="progress-section">
                                    <span id="current-time">0:00</span>
                                    <div class="progress-bar" id="progress-bar">
                                        <div class="progress-track">
                                            <div class="progress-fill" id="progress-fill"></div>
                                            <div class="progress-handle" id="progress-handle"></div>
                                        </div>
                                    </div>
                                    <span id="total-time">0:00</span>
                                </div>
                                
                                <div class="volume-section">
                                    <span>🔊</span>
                                    <input type="range" id="volume-slider" min="0" max="100" value="50" class="volume-slider">
                                    <span id="volume-value">50%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Music Library -->
                    <div class="music-library hidden" id="music-library">
                        <div class="library-tabs">
                            <button class="tab-btn active" data-tab="playlists">🎵 Playlists</button>
                            <button class="tab-btn" data-tab="liked">❤️ Liked Songs</button>
                        </div>

                        <!-- Playlists Tab -->
                        <div class="tab-content active" id="playlists-tab">
                            <div class="card">
                                <div class="card__header">
                                    <h3>Your Playlists</h3>
                                    <div class="search-box">
                                        <input type="text" id="playlist-search" placeholder="Search playlists..." class="form-control">
                                    </div>
                                </div>
                                <div class="card__body">
                                    <div class="playlists-grid" id="playlists-grid">
                                        <div class="loading">Loading playlists...</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Liked Songs Tab -->
                        <div class="tab-content" id="liked-tab">
                            <div class="card">
                                <div class="card__header">
                                    <h3>❤️ Liked Songs</h3>
                                    <div class="search-box">
                                        <input type="text" id="tracks-search" placeholder="Search liked songs..." class="form-control">
                                    </div>
                                </div>
                                <div class="card__body">
                                    <div class="tracks-list" id="tracks-list">
                                        <div class="loading">Loading liked songs...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reminders Section -->
        <section id="reminders" class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">🍽️ Reminders</h2>
                    <p class="section-subtitle">Stay healthy and hydrated! 💪</p>
                </div>
                
                <!-- Notification Status -->
                <div class="card notification-status-card" id="notification-status">
                    <div class="card__header">
                        <h3>🔔 Notification Status</h3>
                    </div>
                    <div class="card__body">
                        <div class="notification-status">
                            <div class="status-indicator" id="notification-indicator">
                                <span class="status-dot"></span>
                                <span class="status-text" id="notification-status-text">Checking...</span>
                            </div>
                            <button class="btn btn--primary btn--sm" id="request-notifications">Enable Notifications</button>
                        </div>
                        <div class="next-reminder" id="next-reminder-info">
                            <small id="next-reminder-text">No upcoming reminders</small>
                        </div>
                    </div>
                </div>
                
                <div class="reminders-grid">
                    <div class="card">
                        <div class="card__header">
                            <h3>🍳 Meal Reminders</h3>
                        </div>
                        <div class="card__body">
                            <div class="meal-list" id="meal-list">
                                <div class="meal-item">
                                    <div class="meal-header">
                                        <div class="meal-icon">🍳</div>
                                        <div class="meal-info">
                                            <span class="meal-name">Breakfast</span>
                                            <span class="meal-description">Start your day right!</span>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="breakfast-toggle">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <select id="breakfast-time" class="form-control meal-time">
                                        <option value="08:00" selected>8:00 AM</option>
                                        <option value="08:30">8:30 AM</option>
                                        <option value="09:00">9:00 AM</option>
                                        <option value="09:30">9:30 AM</option>
                                        <option value="10:00">10:00 AM</option>
                                    </select>
                                </div>

                                <div class="meal-item">
                                    <div class="meal-header">
                                        <div class="meal-icon">🥗</div>
                                        <div class="meal-info">
                                            <span class="meal-name">Lunch</span>
                                            <span class="meal-description">Fuel your afternoon!</span>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="lunch-toggle">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <select id="lunch-time" class="form-control meal-time">
                                        <option value="12:00">12:00 PM</option>
                                        <option value="12:30">12:30 PM</option>
                                        <option value="13:00" selected>1:00 PM</option>
                                        <option value="13:30">1:30 PM</option>
                                        <option value="14:00">2:00 PM</option>
                                    </select>
                                </div>

                                <div class="meal-item">
                                    <div class="meal-header">
                                        <div class="meal-icon">🍽️</div>
                                        <div class="meal-info">
                                            <span class="meal-name">Dinner</span>
                                            <span class="meal-description">End the day well!</span>
                                        </div>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="dinner-toggle">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <select id="dinner-time" class="form-control meal-time">
                                        <option value="18:00">6:00 PM</option>
                                        <option value="18:30">6:30 PM</option>
                                        <option value="19:00" selected>7:00 PM</option>
                                        <option value="19:30">7:30 PM</option>
                                        <option value="20:00">8:00 PM</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__header">
                            <h3>💧 Water Reminders</h3>
                        </div>
                        <div class="card__body">
                            <div class="water-controls">
                                <div class="water-toggle">
                                    <div class="water-info">
                                        <span class="water-label">Enable Water Reminders</span>
                                        <span class="water-description">Stay hydrated! 💦</span>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="water-toggle">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="form-group">
                                    <label for="water-interval-select" class="form-label">Reminder Interval</label>
                                    <select id="water-interval-select" class="form-control">
                                        <option value="30">Every 30 minutes</option>
                                        <option value="60" selected>Every 1 hour</option>
                                        <option value="120">Every 2 hours</option>
                                        <option value="180">Every 3 hours</option>
                                    </select>
                                </div>

                                <!-- Test Notification Button for debugging -->
                                <button class="btn btn--outline btn--sm" id="test-notification">Test Notification</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">📸 Photo Gallery</h2>
                    <p class="section-subtitle">Beautiful memories captured! ✨</p>
                </div>
                
                <div class="gallery-controls">
                    <input type="file" id="photo-upload" accept="image/*" multiple style="display: none;">
                    <button class="btn btn--primary" id="upload-btn">📷 Upload Photos</button>
                    <button class="btn btn--secondary" id="slideshow-btn">🎬 Start Slideshow</button>
                </div>

                <div class="gallery-grid" id="gallery-grid">
                    <div class="empty-gallery">
                        <div class="empty-icon">📸</div>
                        <h3>No photos yet</h3>
                        <p>Upload some beautiful memories to get started!</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CALENDAR SECTION - Replace your existing calendar HTML -->
        <section id="calendar" class="section">
            <div class="section-header">
                <h2>📅 Personal Calendar</h2>
                <p>Plan your celebrations! 🎉</p>
            </div>
            
            <div class="calendar-container">
                <div class="calendar-header">
                    <button id="prev-month" class="nav-btn">❮</button>
                    <h2 id="current-month" class="current-month">September 2025</h2>
                    <button id="next-month" class="nav-btn">❯</button>
                </div>

                <div id="calendar-grid" class="calendar-grid">
                    <!-- Days will be inserted here by JavaScript -->
                </div>

                <div class="upcoming-events">
                    <h3>🎉 Upcoming Events</h3>
                    <div id="events-list"></div>
                    <button id="add-event-btn" class="btn btn--primary">+ Add Event</button>
                </div>
            </div>

            <!-- Event Modal -->
            <div id="event-modal" class="modal hidden">
                <div class="modal-content">
                    <!-- Content will be dynamically generated -->
                </div>
            </div>
        </section>

    </main>

    <!-- Slideshow Modal -->
    <div class="modal hidden" id="slideshow-modal">
        <div class="modal-content slideshow-content">
            <button class="modal-close" id="close-slideshow">&times;</button>
            <div class="slideshow-container">
                <button class="slideshow-btn prev-btn" id="prev-slide">❮</button>
                <img id="slideshow-image" src="" alt="Slideshow Image">
                <button class="slideshow-btn next-btn" id="next-slide">❯</button>
            </div>
            <div class="slideshow-counter">
                <span id="slide-counter">1 / 1</span>
            </div>
        </div>
    </div>

    <!-- Event Modal -->
    <div class="modal hidden" id="event-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="event-modal-title">Add New Event</h3>
                <button class="modal-close" id="close-event-modal">&times;</button>
            </div>
            <form id="event-form">
                <div class="form-group">
                    <label for="event-title" class="form-label">Event Title</label>
                    <input type="text" id="event-title" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="event-date" class="form-label">Date</label>
                    <input type="date" id="event-date" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="event-time" class="form-label">Time</label>
                    <input type="time" id="event-time" class="form-control">
                </div>
                
                <div class="form-group">
                    <label for="event-description" class="form-label">Description</label>
                    <textarea id="event-description" class="form-control" rows="3"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn--outline" id="cancel-event">Cancel</button>
                    <button type="submit" class="btn btn--primary">Save Event</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Track Details Modal -->
    <div class="modal hidden" id="track-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="track-modal-title">Track Details</h3>
                <button class="modal-close" id="close-track-modal">&times;</button>
            </div>
            <div class="track-modal-content">
                <img id="modal-track-image" src="" alt="Album Art" class="modal-track-image">
                <div class="modal-track-details">
                    <h4 id="modal-track-name">Track Name</h4>
                    <p id="modal-track-artist">Artist</p>
                    <p id="modal-track-album">Album</p>
                    <div class="modal-track-actions">
                        <button class="btn btn--primary" id="play-track-btn">▶️ Play</button>
                        <button class="btn btn--outline" id="add-to-queue-btn">➕ Add to Queue</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <script src="app.js"></script>
</body>
</html>